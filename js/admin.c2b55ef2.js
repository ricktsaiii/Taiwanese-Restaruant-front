(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{3530:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"admin"}},[a("div",{staticClass:"admin_head"}),a("div",{staticClass:"admin_body"},[a("div",{staticClass:"admin_left"},[t._m(0),a("b-nav",{staticClass:" admin w-25",attrs:{vertical:""}},[a("b-nav-item",{staticClass:"admin_title"},[t._v("預約管理")]),a("b-nav-item",{staticClass:"admin_title",attrs:{to:"/admin/orders",exact:""}},[t._v("訂單管理")]),a("b-nav-item",{staticClass:"admin_title",attrs:{to:"/admin/products"}},[t._v("商品管理")]),a("b-nav-item",{staticClass:"admin_title"},[t._v("前台管理")]),a("br"),a("br"),a("b-nav-item",{staticClass:"admin_title",on:{click:t.logout}},[t._v("登 出")])],1)],1),a("div",{staticClass:"admin_right"},[a("router-view")],1)])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{href:"",to:"/"}},[a("div",{staticClass:"admin_logo",attrs:{active:""}})])}],n={methods:{logout:function(){this.$store.dispatch("user/logout")}}},s=n,o=(a("4a9a"),a("2877")),l=Object(o["a"])(s,r,i,!1,null,null,null);e["default"]=l.exports},"4a9a":function(t,e,a){"use strict";a("dea9")},aa93:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"adminproduct"}},[a("b-container",[a("div",{staticClass:"admin_right"},[a("div",{staticClass:"admin_right_1"},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-product",modifiers:{"modal-product":!0}}],staticClass:"adminproduct_add",attrs:{pill:""}},[t._v("+ 新 增")])],1),a("b-modal",{attrs:{id:"modal-product",title:t.form._id.length>0?"編輯商品":"新增商品",centered:"","ok-title":"送出","cancel-variant":"danger","cancel-title":"取消","ok-disabled":t.modalSubmitting,"cancel-disabled":t.modalSubmitting},on:{ok:t.submitModal,hidden:t.resetForm}},[a("b-form-group",{attrs:{label:"商品名稱","label-for":"input-name",description:"必填欄位","invalid-feedback":"商品名稱必填",state:t.state.name}},[a("b-form-input",{attrs:{id:"input-name",type:"text",required:"",placeholder:"請輸入商品名稱",state:t.state.name},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("b-form-group",{attrs:{label:"商品價格","label-for":"input-price",description:"必填欄位","invalid-feedback":"價格必需是 0 元以上",state:t.state.price}},[a("b-form-input",{attrs:{id:"input-price",type:"number",min:"0",required:"",placeholder:"請輸入商品價格",state:t.state.price},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),a("b-form-group",{attrs:{label:"商品分類","label-for":"input-category",description:"商品分類","invalid-feedback":"必填分類",state:t.state.category}},[a("b-form-select",{attrs:{id:"input-category",required:"",options:t.categories,placeholder:"請輸入商品分類",state:t.state.category},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}})],1),a("b-form-group",{attrs:{label:"商品描述","label-for":"input-details",description:"必填欄位","invalid-feedback":"必填說明",state:t.state.details}},[a("b-form-textarea",{attrs:{id:"input-details",required:"",rows:"3","max-row":"6",placeholder:"請輸入商品說明"},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),a("b-form-group",{attrs:{label:"商品內文","label-for":"input-description",description:"必填欄位","invalid-feedback":"必填說明",state:t.state.description}},[a("b-form-textarea",{attrs:{id:"input-description",required:"",rows:"3","max-row":"6",placeholder:"請輸入商品說明"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("br"),a("img-inputer",{attrs:{accept:"image/*",theme:"light",size:"large","bottom-text":"點選或拖拽圖片以修改","hover-text":"點選或拖拽圖片以修改",placeholder:"點選或拖拽選擇圖片","max-size":1024,"exceed-size-text":"檔案大小不能超過"},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}}),a("br"),a("b-form-group",{attrs:{label:""}},[a("b-form-radio",{attrs:{value:!0},model:{value:t.form.sell,callback:function(e){t.$set(t.form,"sell",e)},expression:"form.sell"}},[t._v("上架")]),a("b-form-radio",{attrs:{value:!1},model:{value:t.form.sell,callback:function(e){t.$set(t.form,"sell",e)},expression:"form.sell"}},[t._v("下架")])],1)],1),a("div",{staticClass:"admin_content"},[a("b-nav",{staticClass:"admin_list",attrs:{pills:""}},[a("b-nav-item",{attrs:{active:0===t.tab},on:{click:function(e){t.tab=0}}},[t._v("全部商品")]),a("b-nav-item",{attrs:{active:1===t.tab},on:{click:function(e){t.tab=1}}},[t._v("上架中")]),a("b-nav-item",{attrs:{active:2===t.tab},on:{click:function(e){t.tab=2}}},[t._v("已下架")]),a("b-nav-item",{attrs:{active:3===t.tab},on:{click:function(e){t.tab=3}}},[t._v("預約上架")])],1),a("div",{staticClass:"admin_right_rightList"},[a("div",{staticClass:"dropdown"},[a("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" 全 部 ")]),a("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton1"}},[a("li",[a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Action")])]),a("li",[a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Another action")])]),a("li",[a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Something else here")])])])]),a("form",{staticClass:"d-flex Search-form"},[a("input",{staticClass:"form-control me-2",attrs:{type:"search",placeholder:"Search","aria-label":"Search"}}),a("button",{staticClass:"btn search",attrs:{type:"submit"}},[t._v("搜 尋")])])])],1),a("b-table",{ref:"table",attrs:{id:"admin_content_body",items:t.filtered,fields:t.fields},scopedSlots:t._u([{key:"cell(image)",fn:function(e){return[e.item.image?a("img",{staticStyle:{height:"50px",width:"100px"},attrs:{src:e.item.image}}):t._e()]}},{key:"cell(sell)",fn:function(e){return[t._v(" "+t._s(e.item.sell?"v":"")+" ")]}},{key:"cell(action)",fn:function(e){return[a("button",{staticClass:"btn search",on:{click:function(a){return t.editProduct(e.index)}}},[t._v("編 輯")])]}}])}),a("router-view")],1)])],1)},i=[],n=a("5530"),s=a("1da1"),o=(a("96cf"),a("b0c0"),a("4de4"),a("d3b7"),{data:function(){return{fields:[{key:"image",label:"圖片"},{key:"name",label:"名稱"},{key:"price",label:"價格"},{key:"category",label:"分類"},{key:"details",label:"說明"},{key:"description",label:"內文"},{key:"sell",label:"上架"},{key:"action",label:"操作"}],products:[],modalSubmitting:!1,categories:[{text:"請選擇分類",value:""},"新年限定禮盒","經典禮盒","長輩一定愛"],form:{name:"",price:null,details:"",description:"",image:null,sell:!1,category:"",_id:"",index:-1},tab:0}},computed:{state:function(){return{name:0!==this.form.name.length||null,price:null===this.form.price?null:this.form.price>=0,category:0!==this.form.category.length||null}},filtered:function(){var t=this;return this.products.filter((function(e){switch(t.tab){case 0:return!0;case 1:return e.sell;case 2:return!e.sell;case 3:return!1}}))}},methods:{submitModal:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,i,s,o,l,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.preventDefault(),e.state.name&&e.state.price&&e.state.category){a.next=4;break}return e.$swal({icon:"error",title:"錯誤",text:"缺少必填欄位"}),a.abrupt("return");case 4:for(i in e.modalSubmitting=!0,r=new FormData,e.form)"_id"!==i&&r.append(i,e.form[i]);if(a.prev=7,0!==e.form._id.length){a.next=16;break}return a.next=11,e.api.post("/products",r,{headers:{authorization:"Bearer "+e.user.token}});case 11:s=a.sent,o=s.data,e.products.push(o.result),a.next=22;break;case 16:return a.next=18,e.api.patch("/products/"+e.form._id,r,{headers:{authorization:"Bearer "+e.user.token}});case 18:l=a.sent,c=l.data,e.products[e.form.index]=Object(n["a"])(Object(n["a"])({},e.form),{},{image:c.result.image}),e.$refs.table.refresh();case 22:e.$bvModal.hide("modal-product"),a.next=28;break;case 25:a.prev=25,a.t0=a["catch"](7),e.$swal({icon:"error",title:"錯誤",text:a.t0.response.data.message});case 28:e.modalSubmitting=!1;case 29:case"end":return a.stop()}}),a,null,[[7,25]])})))()},resetForm:function(t){this.modalSubmitting?t.preventDefault():this.form={name:"",price:null,details:"",description:"",image:null,sell:!1,category:"",_id:"",index:-1}},editProduct:function(t){this.form=Object(n["a"])(Object(n["a"])({},this.products[t]),{},{image:null,index:t}),this.$bvModal.show("modal-product")}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/products/all",{headers:{authorization:"Bearer "+t.user.token}});case 3:a=e.sent,r=a.data,t.products=r.result,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得商品失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}),l=o,c=(a("fb7f"),a("2877")),d=Object(c["a"])(l,r,i,!1,null,null,null);e["default"]=d.exports},b0c0:function(t,e,a){var r=a("83ab"),i=a("5e77").EXISTS,n=a("e330"),s=a("9bf2").f,o=Function.prototype,l=n(o.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=n(c.exec),u="name";r&&!i&&s(o,u,{configurable:!0,get:function(){try{return d(c,l(this))[1]}catch(t){return""}}})},bbd4:function(t,e,a){},c732:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"adminHome"}},[a("h1",[t._v("請選擇管理項目")])])}],n=a("2877"),s={},o=Object(n["a"])(s,r,i,!1,null,null,null);e["default"]=o.exports},dea9:function(t,e,a){},ec5c:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"adminOders"}},[a("h1",[t._v("訂單管理")])])}],n=a("2877"),s={},o=Object(n["a"])(s,r,i,!1,null,null,null);e["default"]=o.exports},fb7f:function(t,e,a){"use strict";a("bbd4")}}]);
//# sourceMappingURL=admin.c2b55ef2.js.map